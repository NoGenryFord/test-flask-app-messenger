<!DOCTYPE html>

<!-- This is the main template for the P2P messenger -->
<html>

<!-- Header section -->
<head>
    <title>P2P Messenger</title>
</head>

<!-- Body section -->
<body>
    <h1>Welcome to P2P Messenger!</h1>
    <div id="messages"></div> <!-- This is where the messages will be displayed -->
    <input type="text" id="messageInput" placeholder="Enter your message"> <!-- Input field for the message -->
    <button id="sendButton">Send</button> <!-- Button to send the message -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script>
        const socket = io();
        const messagesDiv = document.getElementById('messages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');

        // Initialize the WebSocket connection
        socket.on('connect', () => {
            console.log('Connected to WebSocket');
        });

        // Handle the 'my_response' event from the server
        socket.on('my_response', (data) => {
            console.log('Response from server:', data);
        });

        // Handle incoming messages
        socket.on('message', (data) => {
            const newMessage = document.createElement('p');
            newMessage.textContent = `Other: ${data.text}`;
            messagesDiv.appendChild(newMessage);
        });

        // Send a message when the button is clicked
        sendButton.addEventListener('click', () => {
            const text = messageInput.value;
            if (text) {
                socket.emit('message', { text: text });
                const newMessage = document.createElement('p');
                newMessage.textContent = `You: ${text}`;
                messagesDiv.appendChild(newMessage);
                messageInput.value = '';
            }
        });
    </script>
</body>
</html>